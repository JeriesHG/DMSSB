<div class="animate fadeIn">

  <h2 class="row-separator">Busqueda de documentos y registros</h2>

  <div class="form-divider"></div>

  <form class="row" ng-submit="doSearch()">
    <div class="col-sm-5">
      <label>Codigo:</label>
      <input type="text" placeholder="Codigo de documento o registro" class="form-control" ng-model="search.code"/>
    </div>
    <div class="col-sm-5">
      <label>Nombre:</label>
      <input type="text" placeholder="Nombre de documento o registro" class="form-control" ng-model="search.name"/>
    </div>
    <div class="col-sm-5">
      <label for="dept">Departamento:</label>
      <select name="dept" id="dept" class="form-control" ng-model="search.department" ng-options="item.department as item.department for item in departments">
        <option value="">Seleccione un departamento  {{optional ? '(optional)' : ''}}</option>
      </select>
    </div>
    <div class="col-sm-5 ">
      <label for="dept">Planta :</label>
      <select name="dept" id="dept" class="form-control" ng-model="search.business" ng-options="item.business as item.business for item in business">
        <option value="">Seleccione una planta  {{optional ? '(optional)' : ''}}</option>
      </select>
    </div>
    <div class="col-sm-5 row-separator">
      <label for="dept">Tipo de Documento:</label>
      <select name="dept" id="dept" class="form-control" ng-model="search.docType" ng-options="item.type as item.type for item in docTypes">
        <option value="">Seleccione un tipo de documento  {{optional ? '(optional)' : ''}}</option>
      </select>
    </div>
    <div class="col-sm-5">
      <label>Estado:</label>
        <select name="dept" id="dept" class="form-control" ng-model="search.status">
        <option value="">Seleccione un estado  {{optional ? '(optional)' : ''}}</option>
        <option value="Anulado">Anulado</option>
        <option value="En revision por calidad">En revision por calidad</option>
        <option value="Rechazado por calidad">Rechazado por calidad</option>
        <option value="En revision por SGIA">En revision por SGIA</option>
        <option value="Rechazado por SGIA">Rechazado por SGIA</option>
        <option value="En revision por gerencia">En revision por gerencia</option>
        <option value="Rechazado por gerencia">Rechazado por gerencia</option>
        <option value="En revision por jefe de departmento">En revision por jefe de departmento</option>
        <option value="Rechazado por jefe de departmento">Rechazado por jefe de departmento</option>
        <option value="Publicado">Publicado</option>
      </select>
    </div>
    <div class="col-sm-8">
      <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i> Buscar</button>
    </div>
  </form>
  <div class="form-divider"></div>

  <table class="table table-hover table-responsive" ng-show="searchDocuments && searchDocuments.length !== 0">
    <thead>
      <tr>
       <td><strong>Codigo</strong></td>
       <td><strong>Nombre</strong></td>
       <td><strong>Tipo</strong></td>
       <td><strong>Planta</strong></td>
       <td><strong>Departamento</strong></td>
       <td><strong>Prioridad</strong></td>
       <td><strong>Solicitante</strong></td>
       <td><strong>Fecha Solicitada</strong></td>
       <td><strong>Fecha Requerida</strong></td>
       <td><strong>Fecha Vencimiento</strong></td>
       <td><strong>Fecha Creada</strong></td>
       <td></td>
     </tr>
   </thead>
   <tbody>
     <tr ng:repeat="e in searchDocuments" >
       <td >{{e.code}}</td>
       <td>{{e.name}}</td>
       <td>{{e.type.type}}</td>
       <td>{{e.business}}</td>
       <td>{{e.department}}</td>
       <td>{{e.priority}}</td>
       <td>{{e.requester}}</td>
       <td>{{e.requestedDate | date: 'yyyy/MM/dd'}}</td>
       <td>{{e.requiredDate | date: 'yyyy/MM/dd'}}</td>
       <td>{{e.expiredDate | date: 'yyyy/MM/dd'}}</td>
       <td>{{e.created | date: 'yyyy/MM/dd'}}</td>
       <td>
         <i class="fa fa-trash" aria-hidden="true"  ng-click="deleteDocument(e._id)" ng-show="client.role.level === 1"></i>
         <i class="fa fa-pencil" aria-hidden="true" style="margin-left:10px;"  ui-sref-active="active" ui-sref="app.docs.edit({id: e._id})"></i>
         <i class="fa fa-eye" aria-hidden="true" style="margin-left:10px;"  ui-sref-active="active" ui-sref="app.docs.history({id: e._id})" title="Ver historial del documento"></i>
       </td>
     </tr>
   </tbody>
 </table>

</div>
